{"version":3,"sources":["uni-app:///main.js","webpack:///E:/aaavision/vision1.0/pages/collection/collection.vue?48ce","webpack:///E:/aaavision/vision1.0/pages/collection/collection.vue?28d8","webpack:///E:/aaavision/vision1.0/pages/collection/collection.vue?305f","webpack:///E:/aaavision/vision1.0/pages/collection/collection.vue?1054","uni-app:///pages/collection/collection.vue","webpack:///E:/aaavision/vision1.0/pages/collection/collection.vue?f9c5","webpack:///E:/aaavision/vision1.0/pages/collection/collection.vue?15c2"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA,wCAA8E;AAC9E;AACA,2G,6FAFmBA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC;AAGnBC,UAAU,CAACC,mBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAuH;AACvH;AAC8D;AACL;AACc;;;AAGvE;AACyK;AACzK,gBAAgB,kLAAU;AAC1B,EAAE,gFAAM;AACR,EAAE,qFAAM;AACR,EAAE,8FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,yFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAwnB,CAAgB,6oBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACqE5oB;;;;;AAKA,6D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;krCAIA,EACA,IADA,kBACA,CACA,SACA,sCADA,EAEA,YAFA,EAGA,WAHA,EAIA,0BAJA,EAKA,gBALA,EAMA,cANA,EAOA,WAPA,EAQA,WARA,EASA,WATA,EAUA,eAVA,GAaA,CAfA,EAgBA,cACA,cADA,EAEA,oBAFA,EAGA,wBAHA,EAIA,kBAJA,EAhBA,EAsBA,SACA;AACA,uBAFA,+BAEA,MAFA,EAEA,CACA,0BACA,eADA,MAEA,iBACA,eADA,GAFA,CAKA,CARA,EAtBA,EAgCA,WACA,YADA,wBACA,GADA,EACA,mBACA,gBACA,wBACA,2BACA,8CACA,CACA,2BACA,wBACA,CACA,oBACA,CARA,EAQA,GARA,EASA,CAZA,EAaA,OAbA,qBAaA,mBACA,gFACA,iBACA,qBADA,IAGA,OACA,CACA,oBACA,OADA,EAEA,QAFA,EAGA,8BAHA,IAIA,IAJA,CAIA,gBACA,wCACA,CANA,EAOA,CA3BA,EA4BA,KA5BA,mBA4BA,CACA,kBACA,8BACA,CA/BA,EAgCA;AACA,kBAjCA,0BAiCA,IAjCA,EAiCA,GAjCA,EAiCA;AAEA;AACA,sBADA,EACA;AACA,0BAFA,EAEA;AACA;;AAEA;AACA,wDAHA,CAGA;AACA;AACA;AACA,SATA;;AAWA,KA9CA;;AAgDA,eAhDA,uBAgDA,IAhDA,EAgDA,QAhDA,EAgDA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA,KAxFA;AAyFA,eAzFA,uBAyFA,GAzFA,EAyFA;AACA;AACA;AACA,gBADA;AAEA,4CAFA;AAGA,uCAHA,EAGA;AACA;AACA;AACA;AACA;AACA,6BADA;AAEA,0BAFA;;AAIA;AACA;;AAEA;AACA;AACA;AACA,4BADA,CACA,KADA,CADA,EAEA;AACA,4CAHA;AAIA,0BAJA;AAKA;AACA,wCADA,EALA;;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCADA;AAEA,sBAFA,CAEA;AACA;AACA;AACA,wCADA;AAEA;AACA;AACA;AACA,qBAFA;AAGA;AACA;AACA;AACA,qBAHA;AAIA,mBAdA;AAeA;;AAEA,eA/BA;AAgCA;AACA;AACA,eAlCA;;AAoCA,WArCA,MAqCA;AACA;AACA;AACA;AACA,oFADA,EACA;AACA,wBAFA;;;;AAMA;AACA,oDADA,EANA;;AASA,8BATA;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCADA;AAEA,wBAFA,CAEA;AACA;AACA;AACA,0CADA;AAEA;AACA;AACA;AACA,uBAFA;AAGA;AACA;AACA;AACA,uBAHA;AAIA,qBAdA;AAeA,mBAtBA,MAsBA;AACA;AACA,iCADA;AAEA,2CAFA;;AAIA;AACA,iBAxCA;;AA0CA,aA5CA;AA6CA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA,SAvJA;;AAyJA,KApPA;AAqPA,kBArPA,0BAqPA,KArPA,EAqPA;AACA;AACA;AACA;AACA;AACA,KA1PA;AA2PA,qBA3PA,6BA2PA,CA3PA,EA2PA;AACA;AACA;AACA;AACA;AACA,KAhQA;;AAkQA;AACA,YAnQA,sBAmQA;AACA;AACA,KArQA,EAhCA;;AAuSA,QAvSA,oBAuSA;AACA;AACA;AACA;AACA,GA3SA;AA4SA,SA5SA,qBA4SA;AACA;AACA,kBADA;AAEA,gBAFA;AAGA,wBAHA;AAIA,qEAJA;;AAMA,GAnTA,E;;;;;;;;;;;;;AC9EA;AAAA;AAAA;AAAA;AAAgpC,CAAgB,inCAAG,EAAC,C;;;;;;;;;;;ACApqC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/collection/collection.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;import '@dcloudio/uni-stat';\nimport Vue from 'vue'\nimport Page from './pages/collection/collection.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./collection.vue?vue&type=template&id=74d0bef4&\"\nvar renderjs\nimport script from \"./collection.vue?vue&type=script&lang=js&\"\nexport * from \"./collection.vue?vue&type=script&lang=js&\"\nimport style0 from \"./collection.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/collection/collection.vue\"\nexport default component.exports","export * from \"-!D:\\\\HX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./collection.vue?vue&type=template&id=74d0bef4&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./collection.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./collection.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<view class=\"cal\" :style=\"{height: `${statusBarHeight}px`}\"></view>\r\n\t\t<search-box class=\"cal\"></search-box>\r\n\t\t<tab-top class=\"cal\" :tabIndex=\"tabIndex\" :tabArr=\"['拍照阅读','场景识别翻译', '历史记录']\" @changeTabIndex=\"changeTabIndex\">\r\n\t\t</tab-top>\r\n\t\t<swiper :style=\"{height: `${calHeight}rpx`}\" :current=\"tabIndex\" @change=\"swiperChangeIndex\">\r\n\r\n\t\t\t<!-- 拍照阅读 -->\r\n\t\t\t<swiper-item>\r\n\t\t\t\t<scroll-view scroll-y :style=\"{height: `${calHeight}rpx`}\">\r\n\t\t\t\t\t<!-- 最好的方案是绑定id(特别是涉及到增加和删除数据的时候) -->\r\n\t\t\t\t\t<block v-for=\"item in collectedArr\" :key=\"item.id\">\r\n\t\t\t\t\t\t<collect-item :bookID=\"item.id\" :bookImgUrl=\"item.imgurl\" :bookName=\"item.name\"\r\n\t\t\t\t\t\t\t:bookSynopsis=\"item.synopsis\" @getID=\"getID\" @showCancalCol=\"showCancalCol\"></collect-item>\r\n\t\t\t\t\t</block>\r\n\t\t\t\t\t<view class=\"mycamera\">\r\n\t\t\t\t\t\t<image src=\"/static/user/camera.png\" mode=\"aspectFill\"\r\n\t\t\t\t\t\t\tstyle=\"width:500rpx;height:500rpx;border-radius: 100%;\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<button class=\"mytext\"  @touchend=\"maskTouchend(1)\" >立即拍照！</button>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t</swiper-item>\r\n\t\t\t<!-- 场景/物体识别 -->\r\n\t\t\t<swiper-item>\r\n\t\t\t\t<scroll-view scroll-y :style=\"{height: `${calHeight}rpx`}\">\r\n\t\t\t\t\t<!-- 最好的方案是绑定id(特别是涉及到增加和删除数据的时候) -->\r\n\t\t\t\t\t<block v-for=\"item in collectedArr\" :key=\"item.id\">\r\n\t\t\t\t\t\t<collect-item :bookID=\"item.id\" :bookImgUrl=\"item.imgurl\" :bookName=\"item.name\"\r\n\t\t\t\t\t\t\t:bookSynopsis=\"item.synopsis\" @getID=\"getID\" @showCancalCol=\"showCancalCol\"></collect-item>\r\n\t\t\t\t\t</block>\r\n\t\t\t\t\t<view class=\"mycamera\">\r\n\t\t\t\t\t\t<image src=\"/static/user/camera.png\" mode=\"aspectFill\"\r\n\t\t\t\t\t\t\tstyle=\"width:500rpx;height:500rpx;border-radius: 100%;\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<button class=\"mytext\" @touchend=\"maskTouchend(2)\">立即识别！</button>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t</swiper-item>\r\n\r\n\t\t\t<!-- 历史记录-->\r\n\t\t\t<swiper-item>\r\n\t\t\t\t<scroll-view scroll-y :style=\"{height: `${calHeight}rpx`}\">\r\n\t\t\t\t\t<view class=\"box-c history mt-2 px-5\" v-for=\"(item,index) in historyList\">\r\n\t\t\t\t\t\t<view class=\"\">{{item.typeName}}</view>\r\n\t\t\t\t\t\t<view class=\"text-heide-2 title\" v-if=\"item.type==1 || item.type==3\">{{item.detail}}</view>\r\n\t\t\t\t\t\t<view class=\"mt-2 time\">{{item.createTime}}</view>\r\n\t\t\t\t\t\t<view class=\"line mt-1\"></view>\r\n\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t</swiper-item>\r\n\t\t</swiper>\r\n\t\t<view class=\"content\" v-if=\"show\">\r\n\t\t\t<view class=\"box d-jc-end\" style=\"color: #515151;\">\r\n\t\t\t\t<text @tap='close()'>x</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"\">\r\n\t\t\t\t<scroll-view scroll-y=\"true\" class=\"scroll-Y\" style=\"height: 550rpx;\" @scrolltolower=\"lower\"\r\n\t\t\t\t\t@scroll=\"scroll\">\r\n\t\t\t\t\t{{content}}\r\n\t\t\t\t</scroll-view>\r\n\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport $U from '@/common/unit';\r\n\timport tabTop from '@/components/tabTop.vue';\r\n\timport searchBox from '@/components/searchBox.vue';\r\n\timport collectItem from '@/components/collectItem.vue';\r\n\timport uniPopup from '@/components/uni-popup/uni-popup.vue';\r\n\timport {\r\n\t\tpathToBase64,\r\n\t\tbase64ToPath\r\n\t} from 'image-tools'\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tstatusBarHeight: this.$statusBarHeight,\r\n\t\t\t\tcalHeight: 0,\r\n\t\t\t\ttabIndex: 0,\r\n\t\t\t\tshowCancalColStatus: false,\r\n\t\t\t\tcollectedArr: [],\r\n\t\t\t\tcancalColID: 0,\r\n\t\t\t\ttouchNum: 0,\r\n\t\t\t\tshow: false,\r\n\t\t\t\tcontent: '',\r\n\t\t\t\thistoryList: []\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\ttabTop,\r\n\t\t\tsearchBox,\r\n\t\t\tcollectItem,\r\n\t\t\tuniPopup\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\t// 监听tabbar的展示\r\n\t\t\tshowCancalColStatus(newVal) {\r\n\t\t\t\tnewVal ? uni.hideTabBar({\r\n\t\t\t\t\tanimation: true\r\n\t\t\t\t}) : uni.showTabBar({\r\n\t\t\t\t\tanimation: true\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tmaskTouchend(num) {\r\n\t\t\t\tthis.touchNum++\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tif (this.touchNum == 1) {\r\n\t\t\t\t\t\tthis.btnClick(num==1?'拍照按钮':'场景识别翻译');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.touchNum >= 2) {\r\n\t\t\t\t\t\tthis.chooseImage(num);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.touchNum = 0\r\n\t\t\t\t}, 250)\r\n\t\t\t},\r\n\t\t\thistory() {\r\n\t\t\t\tif (uni.getStorageSync(\"uid\") == '' || uni.getStorageSync(\"uid\") == undefined) {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '../login/login'\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tthis.$api.history({\r\n\t\t\t\t\tpage: 1,\r\n\t\t\t\t\tsize: 20,\r\n\t\t\t\t\tuid: uni.getStorageSync(\"uid\")\r\n\t\t\t\t}).then((res) => {\r\n\t\t\t\t\tthis.historyList = res.data.data.news\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tclose() {\r\n\t\t\t\tthis.show = false\r\n\t\t\t\tthis.innerAudioContext.stop()\r\n\t\t\t},\r\n\t\t\t//图片转base64\r\n\t\t\tgetImageBase64(file, suc) {\r\n\r\n\t\t\t\tuni.getFileSystemManager().readFile({\r\n\t\t\t\t\tfilePath: file, //选择图片返回的相对路径\r\n\t\t\t\t\tencoding: 'base64', //编码格式\r\n\t\t\t\t\tsuccess: (res) => { //成功的回调\r\n\r\n\t\t\t\t\t\tlet data = res.data\r\n\t\t\t\t\t\tlet base64 = 'data:image/jpeg;base64,' + data //不加上这串字符，在页面无法显示的哦\r\n\t\t\t\t\t\tsuc(base64)\r\n\t\t\t\t\t\tconsole.log(base64);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tdetailImage(path, callback) {\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\tplus.io.resolveLocalFileSystemURL(path, function(entry) {\r\n\t\t\t\t\tentry.file(function(file) {\r\n\t\t\t\t\t\tvar fileReader = new plus.io.FileReader();\r\n\t\t\t\t\t\t//alert(\"getFile:\" + JSON.stringify(file));\r\n\t\t\t\t\t\tfileReader.readAsDataURL(file);\r\n\t\t\t\t\t\tfileReader.onloadend = function(evt) {\r\n\t\t\t\t\t\t\t// console.log(JSON.stringify(evt.target.result)); base64字符串  \r\n\t\t\t\t\t\t\tcallback(evt.target.result);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\t// #endif\r\n\t\t\t \r\n\t\t\t \r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\tvar img = new Image();\r\n\t\t\t\timg.src = path;\r\n\t\t\t\timg.onload = function() {\r\n\t\t\t\t\t//默认按比例压缩\r\n\t\t\t\t\tvar w = this.width,\r\n\t\t\t\t\t\th = this.height;\r\n\t\t\t\t\tvar quality = 0.95; // 默认图片质量为0.7\r\n\t\t\t \r\n\t\t\t\t\t//生成canvas\r\n\t\t\t\t\tvar canvas = document.createElement('canvas');\r\n\t\t\t\t\tvar ctx = canvas.getContext('2d');\r\n\t\t\t \r\n\t\t\t\t\t// 创建属性节点\r\n\t\t\t\t\tcanvas.setAttribute(\"width\", w);\r\n\t\t\t\t\tcanvas.setAttribute(\"height\", h);\r\n\t\t\t \r\n\t\t\t\t\tctx.drawImage(this, 0, 0, w, h);\r\n\t\t\t\t\t// quality值越小，所绘制出的图像越模糊\r\n\t\t\t\t\tvar base64 = canvas.toDataURL('image/jpeg', quality);\r\n\t\t\t\t\t// 回调函数返回base64的值\r\n\t\t\t\t\tcallback(base64);\r\n\t\t\t\t};\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\tchooseImage(num) {\r\n\t\t\t\tlet _this = this\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\tcount: 1,\r\n\t\t\t\t\tsizeType: ['original', 'compressed'],\r\n\t\t\t\t\tsourceType: ['camera', 'album'], //这要注意，camera掉拍照，album是打开手机相册\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t// uni.setStorageSync('uid', '1002')\r\n\t\t\t\t\t\tif (uni.getStorageSync(\"uid\") == undefined || uni.getStorageSync(\"uid\") == '') {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '请登录后再试',\r\n\t\t\t\t\t\t\t\ticon: \"none\"\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (num == 1) {\r\n\t\t\t\t\t\t\tuni.uploadFile({\r\n\t\t\t\t\t\t\t\turl: \"http://36.138.201.130:9999/api/general/textRec?uid=\" + uni\r\n\t\t\t\t\t\t\t\t\t.getStorageSync(\"uid\"), //仅为示例，非真实的接口地址\r\n\t\t\t\t\t\t\t\tfilePath: res.tempFilePaths[0],\r\n\t\t\t\t\t\t\t\tname: 'file',\r\n\t\t\t\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\t\t\tContentType: \"image/jpg\"\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\t\t\tlet a = JSON.parse(res.data);\r\n\t\t\t\t\t\t\t\t\tconsole.log(a, '文字识别结果');\r\n\t\t\t\t\t\t\t\t\tif (a.code == 200) {\r\n\t\t\t\t\t\t\t\t\t\t_this.show = true\r\n\t\t\t\t\t\t\t\t\t\t_this.content = a.data\r\n\t\t\t\t\t\t\t\t\t\t_this.$api.ttsText({\r\n\t\t\t\t\t\t\t\t\t\t\ttext: _this.content\r\n\t\t\t\t\t\t\t\t\t\t}).then((res) => {\r\n\t\t\t\t\t\t\t\t\t\t\t_this.innerAudioContext.autoplay = true;\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(res.data.data +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"==================\")\r\n\t\t\t\t\t\t\t\t\t\t\t_this.innerAudioContext.src = res.data.data\r\n\t\t\t\t\t\t\t\t\t\t\t_this.innerAudioContext.onPlay(() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('开始播放');\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t_this.innerAudioContext.onError((res) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(res.errMsg);\r\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(res.errCode);\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\t\t\t\tconsole.log('请求error_______________', err)\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.detailImage( res.tempFilePaths[0], (data)=>{\r\n\t\t\t\t\t\t\t\tvar image=data.replace(/^data:image\\/\\w+;base64,/, \"\");\r\n\t\t\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\t\t\turl: \"http://36.138.201.130:9999/api/general/caption?image=\" +image, //服务器端地址itemRec\r\n\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t \r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t \r\n\t\t\t\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\t\t\t \"Content-Type\": \"application/json\"\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\t\t\tif (res.data.code == 200) {\r\n\t\t\t\t\t\t\t\t\t\t// uni.showModal({\r\n\t\t\t\t\t\t\t\t\t\t// \ttitle: '识别成功',\r\n\t\t\t\t\t\t\t\t\t\t// \tcontent: res.data.data \r\n\t\t\t\t\t\t\t\t\t\t// })\r\n\t\t\t\t\t\t\t\t\t\t_this.show = true\r\n\t\t\t\t\t\t\t\t\t\t_this.content = res.data.data\r\n\t\t\t\t\t\t\t\t\t\t_this.$api.ttsText({\r\n\t\t\t\t\t\t\t\t\t\t\ttext: _this.content\r\n\t\t\t\t\t\t\t\t\t\t}).then((res) => {\r\n\t\t\t\t\t\t\t\t\t\t\t_this.innerAudioContext.autoplay = true;\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(res.data.data +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"==================\")\r\n\t\t\t\t\t\t\t\t\t\t\t_this.innerAudioContext.src = res.data.data\r\n\t\t\t\t\t\t\t\t\t\t\t_this.innerAudioContext.onPlay(() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('开始播放');\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t_this.innerAudioContext.onError((res) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(res.errMsg);\r\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(res.errCode);\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\t\t\t\t\t\tcontent: res.data.msg\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t})\r\n\t// \t\t\t\t\t\tpathToBase64(res.tempFilePaths[0])\r\n\t// \t\t\t\t\t\t\t.then(base64 => {\r\n\t// \t\t\t\t\t\t\t\tvar image=base64.replace(/^data:image\\/\\w+;base64,/, \"\");\r\n\t\t\t\t\t\t\t\t\t\r\n\t// \t\t\t\t\t\t\t\tuni.request({\r\n\t// \t\t\t\t\t\t\t\t\turl: \"http://10.6.166.30:9999/api/general/itemRec?image=\" +image, //服务器端地址\r\n\t// \t\t\t\t\t\t\t\t\tdata: {\r\n \r\n\t// \t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t// \t\t\t\t\t\t\t\t\theader: {\r\n\t// \t\t\t\t\t\t\t\t\t\t \"Content-Type\": \"application/json\"\r\n\t// \t\t\t\t\t\t\t\t\t},\r\n\t// \t\t\t\t\t\t\t\t\tmethod: 'POST',\r\n\t// \t\t\t\t\t\t\t\t\tsuccess: (res) => {\r\n\t// \t\t\t\t\t\t\t\t\t\tconsole.log(res);\r\n\t// \t\t\t\t\t\t\t\t\t\tif (res.data.code == 200) {\r\n\t// \t\t\t\t\t\t\t\t\t\t\t// uni.showModal({\r\n\t// \t\t\t\t\t\t\t\t\t\t\t// \ttitle: '识别成功',\r\n\t// \t\t\t\t\t\t\t\t\t\t\t// \tcontent: res.data.data \r\n\t// \t\t\t\t\t\t\t\t\t\t\t// })\r\n\t// \t\t\t\t\t\t\t\t\t\t\t_this.show = true\r\n\t// \t\t\t\t\t\t\t\t\t\t\t_this.content = res.data.data\r\n\t// \t\t\t\t\t\t\t\t\t\t\t_this.$api.ttsText({\r\n\t// \t\t\t\t\t\t\t\t\t\t\t\ttext: _this.content\r\n\t// \t\t\t\t\t\t\t\t\t\t\t}).then((res) => {\r\n\t// \t\t\t\t\t\t\t\t\t\t\t\t_this.innerAudioContext.autoplay = true;\r\n\t// \t\t\t\t\t\t\t\t\t\t\t\tconsole.log(res.data.data +\r\n\t// \t\t\t\t\t\t\t\t\t\t\t\t\t\"==================\")\r\n\t// \t\t\t\t\t\t\t\t\t\t\t\t_this.innerAudioContext.src = res.data.data\r\n\t// \t\t\t\t\t\t\t\t\t\t\t\t_this.innerAudioContext.onPlay(() => {\r\n\t// \t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('开始播放');\r\n\t// \t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t// \t\t\t\t\t\t\t\t\t\t\t\t_this.innerAudioContext.onError((res) => {\r\n\t// \t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(res.errMsg);\r\n\t// \t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(res.errCode);\r\n\t// \t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t// \t\t\t\t\t\t\t\t\t\t\t})\r\n\t// \t\t\t\t\t\t\t\t\t\t} else {\r\n\t// \t\t\t\t\t\t\t\t\t\t\tuni.showModal({\r\n\t// \t\t\t\t\t\t\t\t\t\t\t\ttitle: '提示',\r\n\t// \t\t\t\t\t\t\t\t\t\t\t\tcontent: res.data.msg\r\n\t// \t\t\t\t\t\t\t\t\t\t\t})\r\n\t// \t\t\t\t\t\t\t\t\t\t}\r\n\t// \t\t\t\t\t\t\t\t\t}\r\n\t// \t\t\t\t\t\t\t\t});\r\n\t// \t\t\t\t\t\t\t})\r\n\t// \t\t\t\t\t\t\t.catch(error => {\r\n\t// \t\t\t\t\t\t\t\tconsole.error(error)\r\n\t// \t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tchangeTabIndex(index) {\r\n\t\t\t\tthis.tabIndex = index\r\n\t\t\t\tif (this.tabIndex == 2) {\r\n\t\t\t\t\tthis.history();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tswiperChangeIndex(e) {\r\n\t\t\t\tthis.tabIndex = e.detail.current;\r\n\t\t\t\tif (this.tabIndex == 2) {\r\n\t\t\t\t\tthis.history();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t// 初始化数据\r\n\t\t\tinitData() {\r\n\t\t\t\tthis.collectedArr = getApp().globalData.collectedBooks\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tthis.innerAudioContext = uni.createInnerAudioContext();\r\n\t\t\tthis.initData()\r\n\t\t\tthis.history()\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\t$U.calSurplusHeight({\r\n\t\t\t\tpageID: this,\r\n\t\t\t\tpos: 'cal',\r\n\t\t\t\tisTabBarPage: true,\r\n\t\t\t\tsuccess: val => this.calHeight = val\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n\t.history {\r\n\t\t.title {\r\n\t\t\tmargin-top: 5rpx;\r\n\t\t\tfont-size: 30rpx;\r\n\t\t}\r\n\r\n\t\t.line {\r\n\t\t\theight: 2rpx;\r\n\t\t\tbackground-color: #dedede;\r\n\t\t}\r\n\r\n\t\tview:first-child {\r\n\t\t\tfont-size: 36rpx;\r\n\t\t\tcolor: #0056B3;\r\n\t\t}\r\n\r\n\t\t.time {\r\n\t\t\tfont-size: 26rpx;\r\n\t\t\tcolor: #a6a6a6;\r\n\t\t}\r\n\t}\r\n\r\n\t.content {\r\n\t\theight: 600rpx;\r\n\t\twidth: 640rpx;\r\n\t\tbackground-color: #d3d3d3;\r\n\t\tposition: absolute;\r\n\t\ttop: 300rpx;\r\n\t\tleft: 25rpx;\r\n\t\tborder-radius: 30rpx;\r\n\t\tpadding: 20rpx 30rpx;\r\n\t}\r\n\r\n\t.mycamera {\r\n\t\tpadding-top: 180upx;\r\n\t\tpadding-left: 130upx;\r\n\t}\r\n\r\n\t.mytext {\r\n\t\tmargin-left: 175rpx;\r\n\t\twidth: 420rpx;\r\n\t\theight: 170rpx;\r\n\t\tcolor: #008080;\r\n\t\tfont-size: 70rpx;\r\n\t}\r\n</style>\n","import mod from \"-!D:\\\\HX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--10-oneOf-1-0!D:\\\\HX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--10-oneOf-1-1!D:\\\\HX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--10-oneOf-1-2!D:\\\\HX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--10-oneOf-1-3!D:\\\\HX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\less-loader\\\\dist\\\\cjs.js??ref--10-oneOf-1-4!D:\\\\HX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--10-oneOf-1-5!D:\\\\HX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./collection.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!D:\\\\HX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--10-oneOf-1-0!D:\\\\HX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--10-oneOf-1-1!D:\\\\HX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--10-oneOf-1-2!D:\\\\HX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--10-oneOf-1-3!D:\\\\HX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\less-loader\\\\dist\\\\cjs.js??ref--10-oneOf-1-4!D:\\\\HX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--10-oneOf-1-5!D:\\\\HX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./collection.vue?vue&type=style&index=0&lang=less&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1657186331714\n      var cssReload = require(\"D:/HX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}